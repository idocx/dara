
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Tutorial 2: Phase analysis with tree search &#8212; Dara Documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="../_static/autodoc_pydantic.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=87e54e7c" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../_static/documentation_options.js?v=918a4b72"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'notebooks/phase_search';</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="icon" href="../_static/logo.svg"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="dara" href="../modules.html" />
    <link rel="prev" title="Tutorial 1: Automated Refinement (with BGMN)" href="automated_refinement.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>
<aside class="bd-header-announcement" aria-label="Announcement">
  <div class="bd-header-announcement__content">Currently the document is still under construction.</div>
</aside>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo-wide.svg" class="logo__image only-light" alt="Dara Documentation - Home"/>
    <script>document.write(`<img src="../_static/logo-wide-dark.svg" class="logo__image only-dark" alt="Dara Documentation - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/idocx/dara" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../index.html">
                    Overview
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../install.html">Installation</a></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="../tutorials.html">Tutorials</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="automated_refinement.html">1. Automated refinement with BGMN</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">2. Phase analysis with tree search</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../modules.html">API Docs</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../dara.html">dara package</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../dara.bgmn.html">dara.bgmn package</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="../dara.bgmn.download_bgmn.html">dara.bgmn.download_bgmn module</a></li>
</ul>
</details></li>
<li class="toctree-l3"><a class="reference internal" href="../dara.data.html">dara.data package</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../dara.prediction.html">dara.prediction package</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="../dara.prediction.base.html">dara.prediction.base module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dara.prediction.core.html">dara.prediction.core module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dara.prediction.rn.html">dara.prediction.rn module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dara.prediction.rxn_ca.html">dara.prediction.rxn_ca module</a></li>
</ul>
</details></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../dara.search.html">dara.search package</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="../dara.search.core.html">dara.search.core module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dara.search.data_model.html">dara.search.data_model module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dara.search.peak_matcher.html">dara.search.peak_matcher module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dara.search.tree.html">dara.search.tree module</a></li>
</ul>
</details></li>
<li class="toctree-l3"><a class="reference internal" href="../dara.bgmn_worker.html">dara.bgmn_worker module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dara.cif.html">dara.cif module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dara.cif2str.html">dara.cif2str module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dara.eflech_worker.html">dara.eflech_worker module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dara.generate_control_file.html">dara.generate_control_file module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dara.jobs.html">dara.jobs module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dara.peak_detection.html">dara.peak_detection module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dara.plot.html">dara.plot module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dara.refine.html">dara.refine module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dara.result.html">dara.result module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dara.schema.html">dara.schema module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dara.settings.html">dara.settings module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dara.structure_db.html">dara.structure_db module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dara.utils.html">dara.utils module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dara.xrd.html">dara.xrd module</a></li>
</ul>
</details></li>
</ul>
</details></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/idocx/dara" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/idocx/dara/blob/docs/notebooks/phase_search.ipynb?plain=1" target="_blank"
   class="btn btn-sm btn-source-file-button dropdown-item"
   title="Show source"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-code"></i>
  </span>
<span class="btn__text-container">Show source</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/notebooks/phase_search.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Tutorial 2: Phase analysis with tree search</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#step-1-prepare-reference-phases">Step 1: Prepare reference phases</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#step-2-search-for-phases">Step 2: Search for phases</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#step-3-result-analysis">Step 3: Result analysis</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="tutorial-2-phase-analysis-with-tree-search">
<h1>Tutorial 2: Phase analysis with tree search<a class="headerlink" href="#tutorial-2-phase-analysis-with-tree-search" title="Link to this heading">#</a></h1>
<p>Dara is equipped with a parallelized tree search algorithm to identify possible phases
present in a given XRD pattern.</p>
<p>In this tutorial, we will try to identify the phases in one experimental solid-state
reaction sample between <code class="docutils literal notranslate"><span class="pre">GeO2</span></code> and <code class="docutils literal notranslate"><span class="pre">ZnO</span></code>.</p>
<blockquote>
<div><p>You can download this tutorial project from <a class="reference external" href="https://idocx.github.io/dara/_static/tutorial.zip">here</a>.</p>
</div></blockquote>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">pip</span> install ipywidgets nbformat
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>

<span class="kn">from</span> <span class="nn">dara</span> <span class="kn">import</span> <span class="n">search_phases</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pattern_path</span> <span class="o">=</span> <span class="s2">&quot;tutorial_data/GeO2-ZnO_700C_60min.xrdml&quot;</span>

<span class="c1"># three elements are present in the sample</span>
<span class="n">chemical_system</span> <span class="o">=</span> <span class="s2">&quot;Ge-O-Zn&quot;</span>
</pre></div>
</div>
</div>
</div>
<section id="step-1-prepare-reference-phases">
<h2>Step 1: Prepare reference phases<a class="headerlink" href="#step-1-prepare-reference-phases" title="Link to this heading">#</a></h2>
<p>Dara pre-builds an index of all the unique and low-energy phases in ICSD and COD
databases. It also implements a method to download CIF structures from COD data server
so that there is no need to obtain the offline database.</p>
<p>Before every search, we will need to gather all the reference phases in the chemical
system for the search algorithm. Dara provides <code class="docutils literal notranslate"><span class="pre">ICSDDatabase</span></code> and <code class="docutils literal notranslate"><span class="pre">CODDatabase</span></code> to do
the filtering.</p>
<p>In this example, we will use <code class="docutils literal notranslate"><span class="pre">CODDatabase</span></code> to download all the phases in the chemical system of <code class="docutils literal notranslate"><span class="pre">Ge-O-Zn</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dara.structure_db</span> <span class="kn">import</span> <span class="n">CODDatabase</span>

<span class="c1"># The COD database contains methods to filter phases in the chemical system</span>
<span class="n">cod_database</span> <span class="o">=</span> <span class="n">CODDatabase</span><span class="p">()</span>

<span class="c1"># gather reference phases and save them to a directory called &quot;cifs&quot;</span>
<span class="n">all_cod_ids</span> <span class="o">=</span> <span class="n">cod_database</span><span class="o">.</span><span class="n">get_cifs_by_chemsys</span><span class="p">(</span><span class="n">chemical_system</span><span class="p">,</span> <span class="n">dest_dir</span><span class="o">=</span><span class="s2">&quot;cifs&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2024-09-28 00:24:01,513 WARNING dara.structure_db Local copy of database not found. Attempting to download structures...
</pre></div>
</div>
<script type="application/vnd.jupyter.widget-view+json">{"version_major": 2, "version_minor": 0, "model_id": "e922b7f4d17c479b8e1d14409fcb661b"}</script><div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2024-09-28 00:24:04,348 INFO dara.structure_db Saving downloaded CIFs to dara_downloaded_cifs
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Skipping high-energy phase: 1528389 (Ge, 96): e_hull = 0.1494
Skipping high-energy phase: 9013109 (Ge, 64): e_hull = 0.3137
2024-09-28 00:24:04,359 INFO dara.structure_db Skipping common gas: O2
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2024-09-28 00:24:04,360 INFO dara.structure_db Skipping common gas: O2
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2024-09-28 00:24:04,361 INFO dara.structure_db Skipping common gas: O2
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2024-09-28 00:24:04,362 INFO dara.structure_db Skipping common gas: O2
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2024-09-28 00:24:04,362 INFO dara.structure_db Skipping common gas: O2
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2024-09-28 00:24:04,363 INFO dara.structure_db Skipping common gas: O2
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2024-09-28 00:24:04,363 INFO dara.structure_db Skipping common gas: O2
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2024-09-28 00:24:04,364 INFO dara.structure_db Skipping common gas: O2
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2024-09-28 00:24:04,365 INFO dara.structure_db Skipping common gas: O2
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2024-09-28 00:24:04,366 INFO dara.structure_db Skipping common gas: O2
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2024-09-28 00:24:04,366 INFO dara.structure_db Skipping common gas: O2
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2024-09-28 00:24:04,367 INFO dara.structure_db Skipping common gas: O2
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2024-09-28 00:24:04,367 INFO dara.structure_db Skipping common gas: O2
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Skipping high-energy phase: 1525835 (GeO2, 205): e_hull = 0.2246
Skipping high-energy phase: 1533322 (Ge7O23, 215): e_hull = 0.6571
Skipping high-energy phase: 1011223 (ZnO2, 19): e_hull = 0.1674
Skipping high-energy phase: 1529590 (ZnO2, 164): e_hull = 0.4588
Skipping high-energy phase: 1534836 (ZnO, 225): e_hull = 0.1473
Successfully copied 9011050.cif to Ge_227_(cod_9011050)-0.cif in cifs
Successfully copied 7101738.cif to Ge_227_(cod_7101738)-0.cif in cifs
Successfully copied 9012435.cif to Zn_194_(cod_9012435)-0.cif in cifs
Successfully copied 4030923.cif to Zn_12_(cod_4030923)-None.cif in cifs
Successfully copied 1538108.cif to O17.28_12_(cod_1538108)-None.cif in cifs
Successfully copied 9007435.cif to GeO2_136_(cod_9007435)-0.cif in cifs
Successfully copied 1525833.cif to GeO2_60_(cod_1525833)-36.cif in cifs
Successfully copied 2104024.cif to GeO2_60_(cod_2104024)-36.cif in cifs
Successfully copied 1526227.cif to GeO2_14_(cod_1526227)-None.cif in cifs
Successfully copied 2300365.cif to GeO2_152_(cod_2300365)-0.cif in cifs
Successfully copied 8000212.cif to Ge5O11_12_(cod_8000212)-None.cif in cifs
Successfully copied 9006858.cif to GeO2_58_(cod_9006858)-6.cif in cifs
Successfully copied 9007477.cif to GeO2_154_(cod_9007477)-0.cif in cifs
Successfully copied 9015579.cif to GeO2_92_(cod_9015579)-1.cif in cifs
Successfully copied 9004178.cif to ZnO_186_(cod_9004178)-0.cif in cifs
Successfully copied 1527883.cif to ZnO2_44_(cod_1527883)-None.cif in cifs
Successfully copied 1536063.cif to Zn10.26O48_160_(cod_1536063)-None.cif in cifs
Successfully copied 1537875.cif to ZnO_216_(cod_1537875)-7.cif in cifs
Successfully copied 4517837.cif to Zn5O12_15_(cod_4517837)-None.cif in cifs
Successfully copied 1007256.cif to Zn2Ge3O8_212_(cod_1007256)-2.cif in cifs
Successfully copied 1549040.cif to Zn2GeO4_227_(cod_1549040)-None.cif in cifs
Successfully copied 1549041.cif to Zn2GeO4_95_(cod_1549041)-None.cif in cifs
Successfully copied 9014631.cif to Zn2GeO4_148_(cod_9014631)-0.cif in cifs
</pre></div>
</div>
</div>
</div>
<p>Since we are using a pre-filterd database (i.e., the COD), the downloaded CIF files will automatically be named according to the
following convention:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="n">composition</span><span class="p">}</span><span class="n">_</span><span class="p">{</span><span class="n">spacegroup</span><span class="p">}</span><span class="n">_</span><span class="p">(</span><span class="n">cod</span><span class="o">|</span><span class="n">icsd_</span><span class="p">{</span><span class="nb">id</span><span class="p">})</span><span class="o">-</span><span class="p">{</span><span class="n">e_hull</span><span class="p">}</span><span class="o">.</span><span class="n">cif</span>
</pre></div>
</div>
<p>Where the <code class="docutils literal notranslate"><span class="pre">e_hull</span></code> is the energy above the convex hull in meV/atom, as determined from
the Materials Project database for the ground-state entry with matching composition and spacegroup.</p>
</section>
<section id="step-2-search-for-phases">
<h2>Step 2: Search for phases<a class="headerlink" href="#step-2-search-for-phases" title="Link to this heading">#</a></h2>
<p>After preparing the reference CIFs, we can start the phase search on a provided XRD
pattern.</p>
<p>In this case, we are using the XRD pattern from the solid-state reaction sample
on our laboratory’s Aeris diffractometer (<code class="docutils literal notranslate"><span class="pre">tutorial_data/GeO2-ZnO_700C_60min.xrdml</span></code>).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># gather all the phases in the &quot;cifs&quot; directory</span>
<span class="n">all_cifs</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="s2">&quot;cifs&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">&quot;*.cif&quot;</span><span class="p">))</span>

<span class="n">search_results</span> <span class="o">=</span> <span class="n">search_phases</span><span class="p">(</span>
    <span class="n">pattern_path</span><span class="o">=</span><span class="n">pattern_path</span><span class="p">,</span>
    <span class="n">phases</span><span class="o">=</span><span class="n">all_cifs</span><span class="p">,</span>
    <span class="n">wavelength</span><span class="o">=</span><span class="s2">&quot;Cu&quot;</span><span class="p">,</span>
    <span class="n">instrument_name</span><span class="o">=</span><span class="s2">&quot;Aeris-fds-Pixcel1d-Medipix3&quot;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">TypeError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span> <span class="n">line</span> <span class="mi">4</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="c1"># gather all the phases in the &quot;cifs&quot; directory</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span> <span class="n">all_cifs</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="s2">&quot;cifs&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">&quot;*.cif&quot;</span><span class="p">))</span>
<span class="ne">----&gt; </span><span class="mi">4</span> <span class="n">search_results</span> <span class="o">=</span> <span class="n">search_phases</span><span class="p">(</span>
<span class="g g-Whitespace">      </span><span class="mi">5</span>     <span class="n">pattern_path</span><span class="o">=</span><span class="n">pattern_path</span><span class="p">,</span>
<span class="g g-Whitespace">      </span><span class="mi">6</span>     <span class="n">phases</span><span class="o">=</span><span class="n">all_cifs</span><span class="p">,</span>
<span class="g g-Whitespace">      </span><span class="mi">7</span>     <span class="n">wavelength</span><span class="o">=</span><span class="s2">&quot;Cu&quot;</span><span class="p">,</span>
<span class="g g-Whitespace">      </span><span class="mi">8</span>     <span class="n">instrument_name</span><span class="o">=</span><span class="s2">&quot;Aeris-fds-Pixcel1d-Medipix3&quot;</span><span class="p">,</span>
<span class="g g-Whitespace">      </span><span class="mi">9</span> <span class="p">)</span>

<span class="ne">TypeError</span>: search_phases() got an unexpected keyword argument &#39;instrument_name&#39;
</pre></div>
</div>
</div>
</div>
</section>
<section id="step-3-result-analysis">
<h2>Step 3: Result analysis<a class="headerlink" href="#step-3-result-analysis" title="Link to this heading">#</a></h2>
<p>The returned search result will be a list of <code class="docutils literal notranslate"><span class="pre">SearchResult</span></code> object.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">search_results</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[SearchResult(refinement_result=RefinementResult(lst_data=LstResult(raw_lst=&#39;Rietveld refinement to file(s) GeO2-ZnO_700C_60min.xy\nBGMN version 4.2.23, 4416 measured points, 121 peaks, 24 parameters\nStart: Wed Jun 26 14:30:50 2024; End: Wed Jun 26 14:30:51 2024\n20 iteration steps\n\nRp=9.96%  Rpb=19.06%  R=10.99%  Rwp=12.04% Rexp=2.69%\nDurbin-Watson d=0.10\n1-rho=1.99%\n\nGlobal parameters and GOALs\n****************************\nQGeO2152cod23003650=0.4771+-0.0021\nQZnO186cod90041780=0.3870+-0.0024\nQZn2GeO4148cod90146310=0.1359+-0.0013\nEPS2=-0.002856+-0.000013\n\nLocal parameters and GOALs for phase GeO2152cod23003650\n******************************************************\nSpacegroupNo=152\nHermannMauguin=P3_121\nXrayDensity=4.276\nRphase=10.88%\nUNIT=NM\nA=0.499111+-0.000024\nC=0.564768+-0.000033\nk1=0.0100000\nB1=0.00500000\nGEWICHT=0.2793+-0.0012\nGrainSize(1,1,1)=84.1811\nAtomic positions for phase GeO2152cod23003650\n---------------------------------------------\n  3     0.4512  0.0000  0.3333     E=(GE(1.0000))\n  6     0.3974  0.3022  0.2429     E=(O(1.0000))\n\nLocal parameters and GOALs for phase ZnO186cod90041780\n******************************************************\nSpacegroupNo=186\nHermannMauguin=P6_3mc\nXrayDensity=5.669\nRphase=9.52%\nUNIT=NM\nA=0.325072+-0.000011\nC=0.520812+-0.000030\nk1=0\nB1=0.003509+-0.000094\nGEWICHT=0.2266+-0.0021\nGrainSize(1,1,1)=120.9+-3.2\nAtomic positions for phase ZnO186cod90041780\n---------------------------------------------\n  2     0.3333  0.6667  0.0000     E=(ZN(1.0000))\n  2     0.3333  0.6667  0.3821     E=(O(1.0000))\n\nLocal parameters and GOALs for phase Zn2GeO4148cod90146310\n******************************************************\nSpacegroupNo=148\nHermannMauguin=R-3\nXrayDensity=4.777\nRphase=20.28%\nUNIT=NM\nA=1.423755+-0.000083\nC=0.952849+-0.000079\nk1=0.0100000\nB1=0.00500000\nGEWICHT=0.07959+-0.00075\nGrainSize(1,1,1)=84.1811\nAtomic positions for phase Zn2GeO4148cod90146310\n---------------------------------------------\n 18     0.2150  0.1940  0.5830     E=(ZN(1.0000))\n 18     0.5483  0.8607  0.5837     E=(ZN(1.0000))\n 18     0.2150  0.1940  0.2500     E=(GE(1.0000))\n 18     0.8877  0.4633  0.4293     E=(O(1.0000))\n 18     0.2220  0.1310  0.4030     E=(O(1.0000))\n 18     0.2230  0.1140  0.7500     E=(O(1.0000))\n 18     0.9957  0.6613  0.5833     E=(O(1.0000))\n&#39;, pattern_name=&#39;GeO2-ZnO_700C_60min.xy&#39;, num_steps=20, rp=9.96, rpb=19.06, r=10.99, rwp=12.04, rexp=2.69, d=0.1, rho=1.99, phases_results={&#39;GeO2_152_(cod_2300365)-0&#39;: PhaseResult(spacegroup_no=152, hermann_mauguin=&#39;P3_121&#39;, xray_density=4.276, rphase=10.88, unit=&#39;NM&#39;, gewicht=(0.2793, 0.0012), gewicht_name=None, a=(0.499111, 2.4e-05), b=None, c=(0.564768, 3.3e-05), alpha=None, beta=None, gamma=None, k1=0.01, B1=0.005), &#39;ZnO_186_(cod_9004178)-0&#39;: PhaseResult(spacegroup_no=186, hermann_mauguin=&#39;P6_3mc&#39;, xray_density=5.669, rphase=9.52, unit=&#39;NM&#39;, gewicht=(0.2266, 0.0021), gewicht_name=None, a=(0.325072, 1.1e-05), b=None, c=(0.520812, 3e-05), alpha=None, beta=None, gamma=None, k1=0, B1=(0.003509, 9.4e-05)), &#39;Zn2GeO4_148_(cod_9014631)-0&#39;: PhaseResult(spacegroup_no=148, hermann_mauguin=&#39;R-3&#39;, xray_density=4.777, rphase=20.28, unit=&#39;NM&#39;, gewicht=(0.07959, 0.00075), gewicht_name=None, a=(1.423755, 8.3e-05), b=None, c=(0.952849, 7.9e-05), alpha=None, beta=None, gamma=None, k1=0.01, B1=0.005)})), phases=((RefinementPhase(path=PosixPath(&#39;cifs/GeO2_152_(cod_2300365)-0.cif&#39;), params={}), RefinementPhase(path=PosixPath(&#39;cifs/GeO2_154_(cod_9007477)-0.cif&#39;), params={})), (RefinementPhase(path=PosixPath(&#39;cifs/ZnO_186_(cod_9004178)-0.cif&#39;), params={}),), (RefinementPhase(path=PosixPath(&#39;cifs/Zn2GeO4_148_(cod_9014631)-0.cif&#39;), params={}),)), foms=((0.0,), (0.03536489998694256, 0.035273051226012), (0.13639804324187943,), (0.33427282595205166,)), lattice_strains=((0.0,), (0.000172525492243293, 0.0005005169609892967), (0.0005712782487738224,), (-0.0033382277696805732,)), missing_peaks=[], extra_peaks=[])]
</pre></div>
</div>
</div>
</div>
<p>In this pattern, we only have one solution found with <code class="docutils literal notranslate"><span class="pre">Rwp</span> <span class="pre">=</span> <span class="pre">12.04</span> <span class="pre">%</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">search_results</span><span class="p">)):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Rwp of solution </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2"> = </span><span class="si">{</span><span class="n">search_results</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">refinement_result</span><span class="o">.</span><span class="n">lst_data</span><span class="o">.</span><span class="n">rwp</span><span class="si">}</span><span class="s2"> %&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Rwp of solution 0 = 12.04 %
</pre></div>
</div>
</div>
</div>
<p>Each <code class="docutils literal notranslate"><span class="pre">SearchResult</span></code> has a <code class="docutils literal notranslate"><span class="pre">.visualize()</span></code> method to visualize the refined pattern and
missing/extra peaks in the solution. If there are no missing or extra peaks, this option
will not appear.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">search_results</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">visualize</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
</div>
</div>
<p>You can also view all the alternative phases in one solution from <code class="docutils literal notranslate"><span class="pre">SearchResult.phases</span></code> attribute.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Phases found in solution 0:&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">phases_</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">search_results</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">phases</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;    - Phase </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="p">[</span><span class="n">phase</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">name</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">phase</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">phases_</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Phases found in solution 0:
    - Phase 0: [&#39;GeO2_152_(cod_2300365)-0.cif&#39;, &#39;GeO2_154_(cod_9007477)-0.cif&#39;]
    - Phase 1: [&#39;ZnO_186_(cod_9004178)-0.cif&#39;]
    - Phase 2: [&#39;Zn2GeO4_148_(cod_9014631)-0.cif&#39;]
</pre></div>
</div>
</div>
</div>
<p>From the result, you can see that for the phase <code class="docutils literal notranslate"><span class="pre">GeO2</span></code>, the algorithm identifies two
similar phases with slightly different spacegroups (152 and 154).</p>
</section>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="automated_refinement.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Tutorial 1: Automated Refinement (with BGMN)</p>
      </div>
    </a>
    <a class="right-next"
       href="../modules.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">dara</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#step-1-prepare-reference-phases">Step 1: Prepare reference phases</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#step-2-search-for-phases">Step 2: Search for phases</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#step-3-result-analysis">Step 3: Result analysis</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Yuxing Fei, Matthew J. McDermott
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2024, Ceder Group.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>